/* empty css                                                                   */import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as E}from"./VContainer-wum_E-SG.js";import{k as f,n as i,z as t,I as s,q as z,x as M,ax as F,c as y,r as d,E as V,i as e,Q as g,K as o,A as J,C as p,M as q,G as w,J as U,a4 as G,j as K,V as P,L as x,y as Q}from"./index-DS7cpca7.js";import{U as S}from"./UserLevel-Bwx1JcrD.js";import{b as D}from"./route-block-B_A1xBdJ.js";import{V as b,a as n}from"./VRow-BMoMs0qk.js";import{b as H,V as O}from"./VDataTable-0q-ekmXu.js";import{V as W,a as X,c as Y,b as R}from"./VList-CCf2lvtj.js";import{V as A}from"./VRating-B2Lp4Nk8.js";import{V as Z}from"./VToolbar-ClxXPEFU.js";import"./VPagination-DLGKx4Ld.js";import"./ssrBoot-DTnI-1DK.js";const ee=""+new URL("smokevideo-DD0phB-j.mp4",import.meta.url).href,te={};function se($,m){return i(),f(E,{id:"video",class:"h-100 pa-0",fluid:""},{default:t(()=>m[0]||(m[0]=[s("video",{autoplay:"",muted:"",loop:"",class:"video-background"},[s("source",{src:ee,type:"video/mp4"})],-1)])),_:1})}const ae=I(te,[["render",se],["__scopeId","data-v-90eba93b"]]),re=""+new URL("membericon2-DNhJ138V.jpg",import.meta.url).href,oe={style:{margin:"auto"}},le={class:"text-success"},ne={class:"text-grey"},ie={class:"text-center"},ce={class:"text-center"},ue={class:"wrap-text"},N={__name:"userRoom",setup($){const m=z();M(),F();const{apiAuth:h}=Q(),k=y(()=>Math.floor(c.value.scorescnt/3)),B=y(()=>3-c.value.scorescnt%3),C=d(S.LEVEL.map((r,l)=>`等級 ${l+1}: ${r}`)),_=d(""),c=d({account:"",createdAt:"",id:"",name:"",scorescnt:0});(async()=>{try{const{data:r}=await h.get("/user/profile");c.value=r.result}catch(r){console.error("取得會員資訊失敗:",r)}})();const T=d({_id:"",name:"",adress:"",timetxt:"",image:"",depiction:"",star:""}),j=y(()=>[{title:"麵屋",align:"center",key:"store",sortable:!0,width:"15%"},{title:"麵屋地址",align:"center",key:"store.adress",sortable:!0,width:"15%"},{title:"照片",align:"center",key:"image",sortable:!1,width:"10%"},{title:"評分",align:"center",key:"star",sortable:!0,width:"15%"},{title:"描述",align:"center",key:"depiction",sortable:!1,width:"30%"},{title:"評論時間",align:"center",key:"updatedAt",sortable:!0,width:"15%"}]),L=d([]);(async()=>{try{const{data:r}=await h.get(`score/getuserall/${m.id}`);L.value=r.result}catch(r){console.error("取得個人評分失敗:",r)}})();const u=d([]);return(async()=>{try{const{data:r}=await h.get(`score/getusernew/${m.id}`);console.log("getusernew",r),u.value=r.result}catch(r){console.error("取得個人最新評分失敗:",r)}})(),(r,l)=>(i(),V(w,null,[e(ae),e(E,null,{default:t(()=>[e(b,null,{default:t(()=>[e(n,{cols:"12",color:"primary"}),e(n,{cols:"12",md:"3"},{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(g,{width:207,height:207,src:re}),s("h1",oe,o(c.value.name),1)]),_:1}),e(n,{cols:"12"},{default:t(()=>[s("h2",null,"帳號:"+o(c.value.account),1),s("h2",null,"已評論店家數: "+o(c.value.scorescnt)+" 家",1),s("h2",le,"等級 "+o(k.value+1)+" : "+o(J(S).LEVEL[k.value]),1),s("h4",ne,[p(" 距離下一個等級還差 "+o(B.value)+" 則評論 ",1),e(H,{"offset-y":""},{activator:t(({props:a})=>[e(G,K(a,{color:"green"}),{default:t(()=>l[1]||(l[1]=[p(" mdi-book-open-page-variant ")])),_:2},1040)]),default:t(()=>[e(q,{"max-height":"300",style:{"overflow-y":"auto"}},{default:t(()=>[e(W,null,{default:t(()=>[(i(!0),V(w,null,U(C.value,(a,v)=>(i(),f(X,{key:v},{default:t(()=>[e(Y,null,{default:t(()=>[p(o(a),1)]),_:2},1024)]),_:2},1024))),128)),e(R)]),_:1})]),_:1})]),_:1})]),l[3]||(l[3]=s("h3",null,"最新一間的評論是:",-1)),u.value.star?(i(),f(b,{key:0,class:"mt-1"},{default:t(()=>[e(n,{cols:"3",class:"bg-greyhalf"},{default:t(()=>[e(g,{class:"mx-auto",src:u.value.store.image,height:"50",width:"50"},null,8,["src"]),s("p",ie,o(u.value.store.name),1)]),_:1}),e(n,{cols:"9",class:"bg-greyhalf",style:{"max-width":"50%"}},{default:t(()=>[s("p",null,[p(" 評價:"+o(u.value.star)+" ",1),e(A,{readonly:"",length:"1",size:"20","model-value":"1","active-color":"info"})]),s("p",null,o(u.value.depiction),1)]),_:1})]),_:1})):(i(),f(b,{key:1},{default:t(()=>[e(n,{cols:"12"},{default:t(()=>l[2]||(l[2]=[s("h3",null,"目前沒有評論",-1)])),_:1})]),_:1})),s("h3",null,o(T.value.timetxt),1),l[4]||(l[4]=s("br",null,null,-1)),s("h3",null,"註冊時間: "+o(new Date(c.value.createdAt).toLocaleString()),1)]),_:1})]),_:1}),e(n,{cols:"12",md:"9"},{default:t(()=>[l[5]||(l[5]=s("h2",{class:"text-center"},"評論一覽",-1)),e(R),e(n,{col:"12"},{default:t(()=>[e(O,{headers:j.value,items:L.value,search:_.value,"filter-keys":["store.adress","store.name"],"items-per-page":3},{top:t(()=>[e(Z,null,{default:t(()=>[e(P,{modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=a=>_.value=a),class:"mt-5","prepend-inner-icon":"mdi-magnify",variant:"outlined",placeholder:"麵屋名稱/地址搜尋"},null,8,["modelValue"]),e(x),e(x),e(x)]),_:1})]),"item.image":t(({value:a})=>[e(g,{src:a,height:"130",width:"160"},null,8,["src"])]),"item.store":t(({item:a})=>[e(g,{class:"mx-auto",src:a.store.image,height:"50",width:"50"},null,8,["src"]),s("p",ce,o(a.store.name),1)]),"item.star":t(({value:a})=>[(i(!0),V(w,null,U(a,v=>(i(),f(A,{key:v,readonly:"",length:"1",size:"18","model-value":"1","active-color":"info"}))),128))]),"item.depiction":t(({value:a})=>[s("pre",ue,o(a),1)]),"item.updatedAt":t(({value:a})=>[p(o(new Date(a).toLocaleString()),1)]),_:2},1032,["headers","items","search"])]),_:1})]),_:1})]),_:1})]),_:1})],64))}};typeof D=="function"&&D(N);const Se=I(N,[["__scopeId","data-v-de9f6ccd"]]);export{Se as default};
