/* empty css                                                                   */import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as I}from"./VContainer-BRjA2mjw.js";import{l as f,n as i,z as t,J as s,q as F,c as g,r as m,k as J,E as w,i as e,R as _,L as o,A as S,C as p,N as q,H as b,K as D,a5 as H,j as K,V as O,M as k,y as P}from"./index-C7EN7WSS.js";import{U as x}from"./UserLevel-ic-neFjG.js";import{a as G}from"./SvgAvatar.vue_vue_type_style_index_0_scoped_cbdcf39b_lang-B5XFBPfI.js";import{b as N}from"./route-block-B_A1xBdJ.js";import{V as L,a as n}from"./VRow-DiwlsjKh.js";import{b as Q,V as W}from"./VDataTable-CaxdNLk1.js";import{V as X,a as Y,c as Z,b as R}from"./VList-CkUjoV57.js";import{V as A}from"./VRating-dzq9tC1l.js";import{V as ee}from"./VToolbar-FFMlZb5y.js";import"./VPagination-vQphwDZc.js";import"./ssrBoot-BYVI9W4x.js";const te=""+new URL("smokevideo-DD0phB-j.mp4",import.meta.url).href,se={};function ae(E,u){return i(),f(I,{id:"video",class:"h-100 pa-0",fluid:""},{default:t(()=>u[0]||(u[0]=[s("video",{autoplay:"",muted:"",loop:"",class:"video-background"},[s("source",{src:te,type:"video/mp4"})],-1)])),_:1})}const oe=C(se,[["render",ae],["__scopeId","data-v-90eba93b"]]),re=""+new URL("membericon2-DNhJ138V.jpg",import.meta.url).href,le={style:{margin:"auto"}},ne={class:"text-success"},ie={class:"text-grey"},ce={class:"text-center"},ue={class:"text-center"},de={class:"wrap-text"},$={__name:"userRoom",setup(E){const u=F(),{apiAuth:h}=P();g(()=>G(u.account,{size:40,blackout:!0}));const v=g(()=>Math.floor(c.value.scorescnt/3)),B=g(()=>3-c.value.scorescnt%3),T=m(x.LEVEL.map((r,l)=>`等級 ${l+1}: ${r}`)),y=m(""),c=m({account:"",createdAt:"",id:"",name:"",scorescnt:0});(async()=>{try{const{data:r}=await h.get("/user/profile");c.value=r.result}catch(r){console.error("取得會員資訊失敗:",r)}})();const z=m({_id:"",name:"",adress:"",timetxt:"",image:"",depiction:"",star:""}),j=g(()=>[{title:"麵屋",align:"center",key:"store",sortable:!0,width:"15%"},{title:"麵屋地址",align:"center",key:"store.adress",sortable:!0,width:"15%"},{title:"照片",align:"center",key:"image",sortable:!1,width:"10%"},{title:"評分",align:"center",key:"star",sortable:!0,width:"15%"},{title:"描述",align:"center",key:"depiction",sortable:!1,width:"30%"},{title:"評論時間",align:"center",key:"updatedAt",sortable:!0,width:"15%"}]),U=m([]);(async()=>{try{const{data:r}=await h.get(`score/getuserall/${u.id}`);U.value=r.result}catch(r){console.error("取得個人評分失敗:",r)}})();const d=m([]);return(async()=>{try{const{data:r}=await h.get(`score/getusernew/${u.id}`);console.log("getusernew",r),d.value=r.result}catch(r){console.error("取得個人最新評分失敗:",r)}})(),(r,l)=>{const M=J("router-link");return i(),w(b,null,[e(oe),e(I,null,{default:t(()=>[e(L,null,{default:t(()=>[e(n,{cols:"12",color:"primary"}),e(n,{cols:"12",md:"3"},{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(_,{width:207,height:207,src:re}),s("h1",le,o(c.value.name),1)]),_:1}),e(n,{cols:"12"},{default:t(()=>[s("h2",null,"帳號:"+o(c.value.account),1),s("h2",null,"已評論店家數: "+o(c.value.scorescnt)+" 家",1),s("h2",ne," 等級 "+o(v.value+1)+" : "+o(S(x).LEVEL[v.value])+" "+o(S(x).ICON[v.value]),1),s("h4",ie,[p(" 距離下一個等級還差 "+o(B.value)+" 則評論 ",1),e(Q,{"offset-y":""},{activator:t(({props:a})=>[e(H,K(a,{color:"green"}),{default:t(()=>l[1]||(l[1]=[p(" mdi-book-open-page-variant ")])),_:2},1040)]),default:t(()=>[e(q,{"max-height":"300",style:{"overflow-y":"auto"}},{default:t(()=>[e(X,null,{default:t(()=>[(i(!0),w(b,null,D(T.value,(a,V)=>(i(),f(Y,{key:V},{default:t(()=>[e(Z,null,{default:t(()=>[p(o(a),1)]),_:2},1024)]),_:2},1024))),128)),e(R)]),_:1})]),_:1})]),_:1})]),l[3]||(l[3]=s("h3",null,"最新一間的評論是:",-1)),d.value.star?(i(),f(L,{key:0,class:"mt-1"},{default:t(()=>[e(n,{cols:"3",class:"bg-greyhalf"},{default:t(()=>[e(_,{class:"mx-auto",src:d.value.store.image,height:"50",width:"50"},null,8,["src"]),s("p",ce,o(d.value.store.name),1)]),_:1}),e(n,{cols:"9",class:"bg-greyhalf",style:{"max-width":"50%"}},{default:t(()=>[s("p",null,[p(" 評價:"+o(d.value.star)+" ",1),e(A,{readonly:"",length:"1",size:"20","model-value":"1","active-color":"info"})]),s("p",null,o(d.value.depiction),1)]),_:1})]),_:1})):(i(),f(L,{key:1},{default:t(()=>[e(n,{cols:"12"},{default:t(()=>l[2]||(l[2]=[s("h3",null,"目前沒有評論",-1)])),_:1})]),_:1})),s("h3",null,o(z.value.timetxt),1),l[4]||(l[4]=s("br",null,null,-1)),s("h3",null,"註冊時間: "+o(new Date(c.value.createdAt).toLocaleString()),1)]),_:1})]),_:1}),e(n,{cols:"12",md:"9"},{default:t(()=>[l[5]||(l[5]=s("h2",{class:"text-center"},"評論一覽",-1)),e(R),e(n,{col:"12"},{default:t(()=>[e(W,{headers:j.value,items:U.value,search:y.value,"filter-keys":["store.adress","store.name"],"items-per-page":3},{top:t(()=>[e(ee,null,{default:t(()=>[e(O,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=a=>y.value=a),class:"mt-5","prepend-inner-icon":"mdi-magnify",variant:"outlined",placeholder:"麵屋名稱/地址搜尋"},null,8,["modelValue"]),e(k),e(k),e(k)]),_:1})]),"item.store":t(({item:a})=>[e(M,{to:`/store/${a.store._id}`},{default:t(()=>[e(_,{class:"mx-auto",src:a.store.image,height:"50",width:"50"},null,8,["src"])]),_:2},1032,["to"]),s("p",ue,o(a.store.name),1)]),"item.image":t(({value:a})=>[e(_,{src:a,height:"130",width:"160"},null,8,["src"])]),"item.star":t(({value:a})=>[(i(!0),w(b,null,D(a,V=>(i(),f(A,{key:V,readonly:"",length:"1",size:"18","model-value":"1","active-color":"info"}))),128))]),"item.depiction":t(({value:a})=>[s("pre",de,o(a),1)]),"item.updatedAt":t(({value:a})=>[p(o(new Date(a).toLocaleString()),1)]),_:2},1032,["headers","items","search"])]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};typeof N=="function"&&N($);const Ne=C($,[["__scopeId","data-v-84b22950"]]);export{Ne as default};
